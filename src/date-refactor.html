<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge; chrome=1" />
		<title>Mangled date examples</title>
		<meta name="viewport" content="width=device-width" />


		<script>
		function prettyDate(now,time){
			var date = new Date(time || ""),
				diff = ((new Date(now).getTime() - date.getTime()) / 1000),
				day_diff = Math.floor(diff / 86400);

			if (isNaN(day_diff) || day_diff < 0 || day_diff >= 31) {
				return;
			}

			return day_diff === 0 && (
					diff < 60 && "just now" ||
					diff < 120 && "1 minute ago" ||
					diff < 3600 && Math.floor( diff / 60 ) + " minutes ago" ||
					diff < 7200 && "1 hour ago" ||
					diff < 86400 && Math.floor( diff / 3600 ) + " hours ago") ||
				day_diff == 1 && "Yesterday" ||
				day_diff < 7 && day_diff + " days ago" ||
				day_diff < 31 && Math.ceil( day_diff / 7 ) + " weeks ago";
		}
		window.onload = function(){
			var links = document.querySelectorAll(".time");
			for (var i = 0; i < links.length; i++) {
				if (links[i].title) {
					var date = prettyDate('2008-01-28T22:25:00Z', links[i].title);
					if (date) {
						links[i].innerHTML = date;
					}
				}
			}
		};
		</script>


	</head>
	<body>

		<ul>

			<li class="entry" id="post57">
				<p>blah blah blah...</p>
				<small class="extra">
					Posted <a class="time" href="/2008/01/blah/57/" title="2008-01-28T20:24:17Z">January 28th, 2008</a> by <span class="author"><a href="/john/">John Resig</a></span>
				</small>
			</li>
			<li class="entry" id="post57">
				<p>foo blah blah...</p>
				<small class="extra">
					Posted <a class="time" href="/2008/01/blah/57/" title="2008-01-27T22:24:17Z">January 27th, 2008</a> by <span class="author"><a href="/john/">John Resig</a></span>
				</small>
			</li>
			<li class="entry" id="post57">
				<p>blah foo blah...</p>
				<small class="extra">
					Posted <a class="time" href="/2008/01/blah/57/" title="2008-01-26T22:24:17Z">January 26th, 2008</a> by <span class="author"><a href="/john/">John Resig</a></span>
				</small>
			</li>
			<li class="entry" id="post57">
				<p>blah blah foo...</p>
				<small class="extra">
					Posted <a class="time" href="/2008/01/blah/57/" title="2008-01-25T22:24:17Z">January 25th, 2008</a> by <span class="author"><a href="/john/">John Resig</a></span>
				</small>
			</li>

		</ul>
		
		<!--<script src="js/script.js"></script>-->
	</body>
</html>